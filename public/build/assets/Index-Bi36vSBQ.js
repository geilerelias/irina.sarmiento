import{d as j,m as g,j as V,i as F,c as y,w as E,a as t,g as d,k as b,t as p,p as D,q as c,u as s,v as u,o as l,F as T,h as U,s as S}from"./app-C5vFyRzY.js";import{P as A}from"./PdfViewer-B9eFEsUM.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-RmY48ZBi.js";import"./index-BvKs1pB8.js";import"./createLucideIcon-ByYh8TX5.js";import"./x-BAd6zpAU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-kKsk6u8f.js";import"./VisuallyHidden-Dgt8TtAq.js";import"./index-DtIZabe7.js";import"./useForwardExpose-duaLjHtH.js";import"./useForwardPropsEmits-DxceM7DD.js";import"./chevron-down-DJqGfVxb.js";import"./index-pEiAPFHB.js";import"./presentation-BU_spHcM.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C0mk3PgX.js";const N={class:"mx-auto max-w-6xl space-y-10 px-6 py-8"},P={class:"flex items-center justify-between"},q={class:"text-orinoco-gray text-sm"},G={class:"rounded-full bg-orinoco-accent/20 px-4 py-1 text-sm font-medium text-orinoco-accent capitalize"},I={class:"space-y-6 p-8"},z={class:"border-orinoco-border flex cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed p-6 text-center transition hover:border-orinoco-primary hover:bg-orinoco-light"},L={class:"flex justify-end"},M=["disabled"],H={class:"border-orinoco-border overflow-hidden rounded-2xl border bg-white shadow-lg"},J={class:"w-full text-sm"},K={class:"px-4 py-3"},O={class:"font-medium text-orinoco-dark"},Q={key:0,class:"text-orinoco-gray text-xs"},R={class:"text-orinoco-gray px-4 py-3"},W={class:"px-4 py-3"},X=["src"],Y={class:"px-4 py-3 text-center"},Z={class:"flex justify-center gap-2"},tt=["onClick"],et=["onClick"],ot={key:0},st={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/40"},it={class:"border-orinoco-border w-full max-w-lg rounded-2xl border bg-white shadow-xl"},nt={class:"space-y-4 px-6 py-6"},rt={class:"flex justify-end gap-3 border-t bg-orinoco-light px-6 py-4"},lt=["disabled"],Ct=j({__name:"Index",props:{category:{},documents:{}},setup(x){const m=x,n=g({title:"",description:"",published_at:"",file:null});function h(){n.post(`/admin/academic-production/${m.category}`,{forceFormData:!0,onSuccess:()=>n.reset()})}const a=V(null),i=g({title:"",description:"",published_at:"",file:null});function v(r){a.value=r,i.title=r.title,i.description=r.description??"",i.published_at=r.published_at??"",i.file=null}function _(){a.value&&i.post(`/admin/academic-production/${m.category}/${a.value.id}`,{method:"put",forceFormData:!0,onSuccess:()=>{a.value=null,i.reset()}})}function k(r){confirm("Â¿Eliminar este documento?")&&S.delete(`/admin/academic-production/${m.category}/${r.id}`)}function w(r){return/\.(jpg|jpeg|png|webp)$/i.test(r)}const C={articles:"ArtÃ­culos cientÃ­ficos",research:"Investigaciones libres",thesis:"Tesis doctoral",evaluations:"Evaluaciones",workshops:"Talleres"},f=F(()=>C[m.category]??"CategorÃ­a desconocida");return(r,e)=>(l(),y(B,null,{default:E(()=>[t("div",N,[t("div",P,[t("div",null,[e[9]||(e[9]=t("h1",{class:"text-3xl font-semibold text-orinoco-dark"}," ProducciÃ³n AcadÃ©mica ",-1)),t("p",q," GestiÃ³n de documentos â€” "+p(f.value),1)]),t("span",G,p(f.value),1)]),t("form",{onSubmit:D(h,["prevent"]),class:"border-orinoco-border rounded-2xl border bg-white shadow-lg"},[e[13]||(e[13]=t("div",{class:"gradient-orinoco h-1 w-full rounded-t-2xl"},null,-1)),t("div",I,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold text-orinoco-dark"}," Nuevo documento ",-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(n).title=o),class:"input",placeholder:"TÃ­tulo",required:""},null,512),[[u,s(n).title]]),c(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(n).description=o),class:"input",rows:"3",placeholder:"DescripciÃ³n"},null,512),[[u,s(n).description]]),c(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=o=>s(n).published_at=o),class:"input"},null,512),[[u,s(n).published_at]]),t("label",z,[t("input",{type:"file",accept:".pdf,image/*",class:"hidden",onChange:e[3]||(e[3]=o=>s(n).file=o.target.files?.[0]??null),required:""},null,32),e[10]||(e[10]=t("span",{class:"text-3xl"},"ðŸ“„",-1)),e[11]||(e[11]=t("span",{class:"mt-2 text-sm text-orinoco-dark"}," Subir PDF o imagen ",-1))]),t("div",L,[t("button",{type:"submit",class:"btn-primary",disabled:s(n).processing}," Guardar documento ",8,M)])])],32),t("div",H,[t("table",J,[e[15]||(e[15]=t("thead",{class:"bg-orinoco-light"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"TÃ­tulo"),t("th",{class:"px-4 py-3 text-left"},"Fecha"),t("th",{class:"px-4 py-3 text-left"},"Archivo"),t("th",{class:"px-4 py-3 text-center"},"Acciones")])],-1)),t("tbody",null,[(l(!0),d(T,null,U(x.documents,o=>(l(),d("tr",{key:o.id,class:"border-t hover:bg-orinoco-light/40"},[t("td",K,[t("p",O,p(o.title),1),o.description?(l(),d("p",Q,p(o.description),1)):b("",!0)]),t("td",R,p(o.published_at??"â€”"),1),t("td",W,[w(o.file_path)?(l(),d("img",{key:0,src:`/storage/${o.file_path}`,class:"border-orinoco-border max-h-48 rounded-xl border"},null,8,X)):(l(),y(A,{key:1,src:`/secure-pdf/${o.file_path}`},null,8,["src"]))]),t("td",Y,[t("div",Z,[t("button",{onClick:$=>v(o),class:"btn-secondary"}," Editar ",8,tt),t("button",{onClick:$=>k(o),class:"btn-danger"}," Eliminar ",8,et)])])]))),128)),x.documents.length===0?(l(),d("tr",ot,[...e[14]||(e[14]=[t("td",{colspan:"4",class:"text-orinoco-gray px-4 py-8 text-center"}," No hay documentos registrados ",-1)])])):b("",!0)])])]),a.value?(l(),d("div",st,[t("div",it,[e[16]||(e[16]=t("div",{class:"border-b px-6 py-4"},[t("h3",{class:"text-lg font-semibold text-orinoco-dark"}," Editar documento ")],-1)),t("div",nt,[c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s(i).title=o),class:"input"},null,512),[[u,s(i).title]]),c(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=o=>s(i).description=o),class:"input",rows:"3"},null,512),[[u,s(i).description]]),c(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=o=>s(i).published_at=o),class:"input"},null,512),[[u,s(i).published_at]]),t("input",{type:"file",class:"input",onChange:e[7]||(e[7]=o=>s(i).file=o.target.files?.[0]??null)},null,32)]),t("div",rt,[t("button",{class:"btn-secondary",onClick:e[8]||(e[8]=o=>a.value=null)}," Cancelar "),t("button",{class:"btn-primary",disabled:s(i).processing,onClick:_}," Guardar cambios ",8,lt)])])])):b("",!0)])]),_:1}))}});export{Ct as default};
