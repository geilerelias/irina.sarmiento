import{d as V,m as v,j as D,i as T,c as b,w as U,a as t,g as i,k as m,t as n,p as S,q as c,u as s,v as p,o,F as w,h as C,s as A}from"./app-D1DBkxJY.js";import{P as $}from"./PdfViewer-CpRuuxa5.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-DO4ygOZv.js";import"./index-DLVzjQ7v.js";import"./createLucideIcon-CcqFyVt3.js";import"./x-1Ugbiu5w.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-kKsk6u8f.js";import"./VisuallyHidden-B1tKt76P.js";import"./index-BVyQP9vy.js";import"./useForwardExpose-AYGmDglK.js";import"./useForwardPropsEmits-XwSxsYNl.js";import"./chevron-down-BZSstbSB.js";import"./index-pEiAPFHB.js";import"./users-CJFAc_sP.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C5BJtLNS.js";const N={class:"mx-auto max-w-6xl space-y-10 px-4 py-6 md:px-6 md:py-8"},P={class:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},q={class:"text-sm text-gray-600 dark:text-gray-400"},G={class:"w-fit rounded-full bg-orinoco-primary/10 px-4 py-1 text-sm font-medium text-orinoco-primary dark:text-orinoco-light"},I={class:"space-y-6 p-6 md:p-8"},L={class:"flex cursor-pointer flex-col items-center justify-center rounded-xl border-2 border-dashed border-gray-300 p-6 text-center transition hover:border-indigo-500 hover:bg-indigo-50 dark:border-gray-600 dark:hover:bg-gray-800"},M={class:"flex justify-end"},z=["disabled"],H={class:"hidden overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-lg md:block dark:border-gray-700 dark:bg-sidebar"},J={class:"w-full text-sm"},K={class:"px-4 py-3"},O={class:"font-medium text-gray-800 dark:text-gray-100"},Q={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},R={class:"px-4 py-3 text-gray-500 dark:text-gray-400"},W={class:"px-4 py-3"},X=["src"],Y={class:"px-4 py-3 text-center"},Z={class:"flex justify-center gap-2"},tt=["onClick"],et=["onClick"],rt={key:0},st={class:"space-y-4 md:hidden"},at={class:"font-semibold text-gray-800 dark:text-gray-100"},ot={key:0,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},dt={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},it={class:"mt-3"},lt=["src"],nt={class:"mt-4 flex gap-2"},ut=["onClick"],ct=["onClick"],pt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 px-4"},gt={class:"max-h-[90vh] w-full max-w-lg overflow-y-auto rounded-2xl border border-gray-200 bg-white shadow-xl dark:border-gray-700 dark:bg-gray-900"},yt={class:"space-y-4 px-6 py-6"},mt={class:"flex justify-end gap-3 border-t bg-gray-50 px-6 py-4 dark:border-gray-700 dark:bg-gray-800"},xt=["disabled"],St=V({__name:"Index",props:{category:{},documents:{}},setup(g){const y=g,d=v({title:"",description:"",published_at:"",file:null});function j(){d.post(`/admin/academic-production/${y.category}`,{forceFormData:!0,onSuccess:()=>d.reset()})}const u=D(null),a=v({title:"",description:"",published_at:"",file:null});function f(l){u.value=l,a.title=l.title,a.description=l.description??"",a.published_at=l.published_at??"",a.file=null}function E(){u.value&&a.post(`/admin/academic-production/${y.category}/${u.value.id}`,{method:"put",forceFormData:!0,onSuccess:()=>{u.value=null,a.reset()}})}function k(l){confirm("Â¿Eliminar este documento?")&&A.delete(`/admin/academic-production/${y.category}/${l.id}`)}function h(l){return/\.(jpg|jpeg|png|webp)$/i.test(l)}const F={articles:"ArtÃ­culos cientÃ­ficos",research:"Investigaciones libres",thesis:"Tesis doctoral",evaluations:"Evaluaciones",workshops:"Talleres"},_=T(()=>F[y.category]??"CategorÃ­a desconocida");return(l,r)=>(o(),b(B,null,{default:U(()=>[t("div",N,[t("div",P,[t("div",null,[r[9]||(r[9]=t("h1",{class:"text-2xl font-semibold text-gray-800 md:text-3xl dark:text-gray-100"}," ProducciÃ³n AcadÃ©mica ",-1)),t("p",q," GestiÃ³n de documentos â€” "+n(_.value),1)]),t("span",G,n(_.value),1)]),t("form",{onSubmit:S(j,["prevent"]),class:"overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-lg dark:border-orinoco-primary dark:bg-sidebar"},[r[13]||(r[13]=t("div",{class:"h-1 w-full bg-gradient-to-r from-orinoco-primary to-orinoco-light"},null,-1)),t("div",I,[r[12]||(r[12]=t("h2",{class:"text-lg font-semibold text-gray-800 md:text-xl dark:text-gray-100"}," Nuevo documento ",-1)),c(t("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>s(d).title=e),class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",placeholder:"TÃ­tulo",required:""},null,512),[[p,s(d).title]]),c(t("textarea",{"onUpdate:modelValue":r[1]||(r[1]=e=>s(d).description=e),class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",rows:"3",placeholder:"DescripciÃ³n"},null,512),[[p,s(d).description]]),c(t("input",{type:"date","onUpdate:modelValue":r[2]||(r[2]=e=>s(d).published_at=e),class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},null,512),[[p,s(d).published_at]]),t("label",L,[t("input",{type:"file",accept:".pdf,image/*",class:"hidden",onChange:r[3]||(r[3]=e=>s(d).file=e.target.files?.[0]??null),required:""},null,32),r[10]||(r[10]=t("span",{class:"text-3xl"},"ðŸ“„",-1)),r[11]||(r[11]=t("span",{class:"mt-2 text-sm text-gray-700 dark:text-gray-300"}," Subir PDF o imagen ",-1))]),t("div",M,[t("button",{type:"submit",class:"btn-primary",disabled:s(d).processing}," Guardar documento ",8,z)])])],32),t("div",H,[t("table",J,[r[15]||(r[15]=t("thead",{class:"bg-gray-50 text-gray-600 dark:bg-gray-800 dark:text-gray-300"},[t("tr",null,[t("th",{class:"px-4 py-3 text-left"},"TÃ­tulo"),t("th",{class:"px-4 py-3 text-left"},"Fecha"),t("th",{class:"px-4 py-3 text-left"},"Archivo"),t("th",{class:"px-4 py-3 text-center"},"Acciones")])],-1)),t("tbody",null,[(o(!0),i(w,null,C(g.documents,e=>(o(),i("tr",{key:e.id,class:"border-t border-gray-200 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800"},[t("td",K,[t("p",O,n(e.title),1),e.description?(o(),i("p",Q,n(e.description),1)):m("",!0)]),t("td",R,n(e.published_at??"â€”"),1),t("td",W,[h(e.file_path)?(o(),i("img",{key:0,src:`/storage/${e.file_path}`,class:"max-h-40 rounded-lg border dark:border-gray-700"},null,8,X)):(o(),b($,{key:1,src:`/secure-pdf/${e.file_path}`},null,8,["src"]))]),t("td",Y,[t("div",Z,[t("button",{class:"btn-secondary",onClick:x=>f(e)}," Editar ",8,tt),t("button",{class:"btn-danger",onClick:x=>k(e)}," Eliminar ",8,et)])])]))),128)),g.documents.length===0?(o(),i("tr",rt,[...r[14]||(r[14]=[t("td",{colspan:"4",class:"px-4 py-8 text-center text-gray-500 dark:text-gray-400"}," No hay documentos registrados ",-1)])])):m("",!0)])])]),t("div",st,[(o(!0),i(w,null,C(g.documents,e=>(o(),i("div",{key:e.id,class:"rounded-xl border border-gray-200 bg-white p-4 shadow dark:border-gray-700 dark:bg-gray-900"},[t("h3",at,n(e.title),1),e.description?(o(),i("p",ot,n(e.description),1)):m("",!0),t("p",dt," Fecha: "+n(e.published_at??"â€”"),1),t("div",it,[h(e.file_path)?(o(),i("img",{key:0,src:`/storage/${e.file_path}`,class:"rounded-lg"},null,8,lt)):(o(),b($,{key:1,src:`/secure-pdf/${e.file_path}`},null,8,["src"]))]),t("div",nt,[t("button",{class:"btn-secondary w-full",onClick:x=>f(e)}," Editar ",8,ut),t("button",{class:"btn-danger w-full",onClick:x=>k(e)}," Eliminar ",8,ct)])]))),128))]),u.value?(o(),i("div",pt,[t("div",gt,[r[16]||(r[16]=t("div",{class:"border-b px-6 py-4 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100"}," Editar documento ")],-1)),t("div",yt,[c(t("input",{"onUpdate:modelValue":r[4]||(r[4]=e=>s(a).title=e),class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},null,512),[[p,s(a).title]]),c(t("textarea",{"onUpdate:modelValue":r[5]||(r[5]=e=>s(a).description=e),class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",rows:"3"},null,512),[[p,s(a).description]]),c(t("input",{type:"date","onUpdate:modelValue":r[6]||(r[6]=e=>s(a).published_at=e),class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100"},null,512),[[p,s(a).published_at]]),t("input",{type:"file",class:"input dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",onChange:r[7]||(r[7]=e=>s(a).file=e.target.files?.[0]??null)},null,32)]),t("div",mt,[t("button",{class:"btn-secondary",onClick:r[8]||(r[8]=e=>u.value=null)}," Cancelar "),t("button",{class:"btn-primary",disabled:s(a).processing,onClick:E}," Guardar cambios ",8,xt)])])])):m("",!0)])]),_:1}))}});export{St as default};
